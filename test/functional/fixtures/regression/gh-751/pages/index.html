<!DOCTYPE html>
<html>
<head>
    <title>GH-751</title>
</head>
<body>
<button id="dblclick">DblClick</button>
<button id="hardWorkMousedown">Hard work on mousedown</button>

<script>
    // Dblclick events
    window.dblclickEvents = [];

    function logDblclickPerformance () {
        window.dblclickEvents.push(Date.now());
    }

    const dblclickBtn = document.getElementById('dblclick');

    dblclickBtn.addEventListener('mouseup', logDblclickPerformance);
    dblclickBtn.addEventListener('click', logDblclickPerformance);
    dblclickBtn.addEventListener('dblclick', logDblclickPerformance);


    // Hadrwork after mousedown events
    window.clickEvents    = [];
    window.HARD_WORK_TIME = 60;

    function logClickPerformance () {
        window.clickEvents.push(Date.now());
    }

    function doHardWork () {
        const startTime = Date.now();

        while (Date.now() < startTime + window.HARD_WORK_TIME) {
        }
    }

    const hardWorkMousedownBtn = document.getElementById('hardWorkMousedown');

    hardWorkMousedownBtn.addEventListener('mousedown', logClickPerformance);
    hardWorkMousedownBtn.addEventListener('mouseup', logClickPerformance);

    hardWorkMousedownBtn.addEventListener('mousedown', doHardWork);
</script>
</body>
</html>
